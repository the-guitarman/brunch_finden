var applyToObject=function(o,e){return $.each(e,function(e,t){o[e]=t}),o},geocodeAddress=function(o,e){e=e||{};var t=new google.maps.Geocoder;t.geocode({address:o,region:"no"},function(o,t){"ok"==t.toLowerCase()?e.success({latitude:o[0].geometry.location.lat(),longitude:o[0].geometry.location.lng()}):e.failure(),e.complete()})},navigatorPosition=function(o){o=o||{};var e=o.success||function(){},t=o.failure||function(){};navigator.geolocation.getCurrentPosition(function(o){e(o)},function(){t()})},geoMap=function(o,e){e=e||{};var t=e.cssId||"#map";delete e.cssId;var n=o.shift(),r={div:t};r=applyToObject(r,initMap(n,e));var a=new GMaps(r);addMarkers(a,o)},initMap=function(o,e){e=e||{};var t={zoom:e.zoom||6,scaleControl:e.scale_control?e.scale_control:!0,rotateControl:e.rotate_control?e.rotate_control:!0,panControl:e.pan_control?e.pan_control:!0,navigationControl:e.navigation_control?e.navigation_control:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:e.map_type_control?e.map_type_control:!0,overviewMapControl:e.overview_map_control?e.overview_map_control:!0,streetViewControl:e.street_view_control?e.street_view_control:!0,zoomControl:e.zoom_control?e.zoom_control:!0};return applyToObject(t,getMarkerPosition(o))},addMarkers=function(o,e){var t=[];return $.each(e,function(e,n){t.push(addMarker(o,n))}),t},addMarker=function(o,e){var t=getMarkerPosition(e);return t=applyToObject(t,getMarkerTitle(e)),t=applyToObject(t,getMarkerIcon(e)),t=applyToObject(t,getMarkerInfoWindow(e)),o.addMarker(t)},getMarkerPosition=function(o){return{lat:o.lat,lng:o.lng}},getMarkerTitle=function(o){return{title:o.title}},getMarkerIcon=function(o){return{icon:{url:o.icon.url,scaledSize:new google.maps.Size(32,32)}}},getMarkerInfoWindow=function(o){var e={};return o.info_window&&(e={infoWindow:{content:o.info_window.content}}),e},showLocationDirections=function(o){var e,t,n=o.currentPosition,r=o.locationPosition,a=o.mapSelector||".directions-map",i=o.panelSelector||".directions-panel",c=modesOfTravel[o.modeOfTravel]||modesOfTravel.WALKING,l=$(a+", "+i).parent().first(),s=new google.maps.DirectionsService,p=function(){e=new google.maps.DirectionsRenderer;var o={zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP,center:n};t=new google.maps.Map($(a)[0],o),e.setMap(t),e.setPanel($(i)[0])},g=function(){var o={origin:n,destination:r,travelMode:c};s.route(o,function(o,t){t==google.maps.DirectionsStatus.OK&&e.setDirections(o)})};p(),g(),$(a+", "+i).css("height",l.width()+"px")};
