var cacheSearchSuggestion={},lastSearchSuggestionsXhr=null;jQuery(function(e){e.widget("custom.globalSearch",e.ui.autocomplete,{_renderMenu:function(t,a){var c=this,o="";e.each(a,function(e,a){a.category!=o&&(t.append("<li class='ui-autocomplete-type'>"+a.category+"</li>"),o=a.category),c._renderItem(t,a)})},_renderItem:function(t,a){return e("<li></li>").data("item.autocomplete",a).append("<a><table><tr><td class='suggested-label'>"+a.label+"</td></tr></table></a>").appendTo(t)}}),e.widget("custom.localSearch",e.ui.autocomplete,{_renderMenu:function(t,a){var c=this;e.each(a,function(e,a){c._renderItem(t,a)})},_renderItem:function(t,a){return e("<li></li>").data("item.autocomplete",a).append("<a><table><tr><td class='suggested-label'>"+a.label+"</td></tr></table></a>").appendTo(t)}}),e("#search-field").globalSearch({appendTo:"#search-suggestions",html:!0,source:function(t,a){lastSearchSuggestionsXhr&&lastSearchSuggestionsXhr.abort();var c=t.term;return c in cacheSearchSuggestion?void a(cacheSearchSuggestion[c]):void(lastSearchSuggestionsXhr=e.ajax({url:location.protocol+"//"+location.host+"/suchvorschlaege",dataType:"json",data:t,success:function(e,t,o){cacheSearchSuggestion[c]=e,o===lastSearchSuggestionsXhr&&a(e),lastSearchSuggestionsXhr=null},complete:function(){}}))},select:function(e,t){window.location.href=t.item.url}})});
